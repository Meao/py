# ВИРТУАЛЬНЫЕ ОКРУЖЕНИЯ 
Это изолированные окружения среды (в нашем случае это окружение Python), которое позволяет нам использовать определенные версии приложений. Множество проектов Python, каждый из которых имеет свои зависимости, могут эффективно управляться с использованием отдельных виртуальных сред. Pipenv, Venv и Pyenv являются популярными инструментами управления зависимостями. Virtualenv устарела в Python 3.8.

pip устанавливает пакеты в одно из двух окружений — в общесистемное или пользовательское. Интерпретатор Python при импорте модуля или пакета ищет оный сначала в пользовательском окружении, затем в общесистемном. Такая последовательность позволяет пользователю иметь нужные именно ему версии библиотек и Python программ. Но даже двух окружений недостаточно, когда программист начинает работать с несколькими проектами: разные проекты могут иметь разные наборы зависимостей. Ещё более тяжелый случай: разные проекты могут зависеть от общей библиотеки, но требовать разные её версии — конфликт версий. Каждое виртуальное окружение представляет собой директорию, содержимое которой структурно напоминает общесистемное окружение — поддиректории соответственно названы и наполнены. 
## VIRTUALENV
пакет virtualenv считается устаревшим, так как поддержка виртуальных окружений является частью стандартной библиотеки Python начиная 3.3 docs.python.org/3/library/venv.html
Cтандартный пакет для работы с виртуальным окружением. 
Зачастую используется вместе с virtualenvwrapper для более удобной работы.

УСТАНОВКА:
```
pip install virtualenv
```
СОЗДАНИЕ ИЗОЛИРОВАННОЙ ОБЛАСТИ:
```
virtualenv название_папки
```
АКТИВАЦИЯ ИЗОЛИРОВАННОЙ ОБЛАСТИ:
```
название_папки\Scripts\activate
```
ДЕАКТИВАЦИЯ ИЗОЛИРОВАННОЙ ОБЛАСТИ:
```
deactivate
```
РАЗЛИЧНЫЕ НАДСТРОЙКИ:
```
-p PYTHON_EXE, --python=PYTHON_EXE
--prompt="подсказка"  (Выводимое имя)
```
## Управление зависимостями с помощью Pipenv 
Pipenv - это менеджер зависимостей, который позволяет создать отдельную виртуальную среду для каждого из проектов и автоматически управлять зависимостями внутри каждого из них. Обертка над pip virtualenv и Pipfile.

УСТАНОВКА:
```
pip install pipenv
```
СОЗДАНИЕ:
```
pipenv --three (или --two) 
```
АКТИВАЦИЯ:
```
pipenv shell
```
ИСПОЛЬЗОВАНИЕ:
```
pipenv install …
```
проверить, установлен ли Pipenv:
```
$ pipenv –version
```
проверить, актуальна ли Pipenv:
```
$ pip install –upgrade pipenv
```
### Использование Pip с Pipenv
Pip интегрирован в Pipenv. Используйте pipenv для установки пакетов, перечисленных в файле needs.txt для каждого из проектов. Рекомендуется устанавливать каждый проект в отдельной виртуальной среде, чтобы избежать конфликтов зависимостей, которые могут возникнуть, когда разные проекты требуют разных версий одного и того же пакета.

Чтобы создать проект Pipenv с использованием Python 3.8, перейдите в каталог, в котором вы хотите создать проект, затем введите:
```
$ pipenv –python 3.8
```
Это автоматически создаст виртуальную среду вместе с Pipfile для отслеживания зависимостей и файл pipfile.lock, который объявляет зависимости и подчиненные зависимости, требуемые в проекте. 

установить отдельный пакет и его зависимости с помощью Pipenv:
```
$ pipenv install <packagename>
```
ПРИМЕЧАНИЕ. Если вы еще не создали виртуальную среду Pipenv при установке Python 3.8, команда установки pipenv создаст ее и добавит файлы pipfile и pipfile.lock.

Кроме того, вы можете предоставить файл require.txt при запуске установки pipenv. В этом случае Pipenv автоматически импортирует содержимое файла требований и создает pipfile.

Чтобы убедиться, что все пакеты установлены, вы можете вывести их. 

а. Перейдите в виртуальную среду Pipenv и откройте окно терминала или команды. 
         
b. Запустите следующую команду, чтобы получить список пакетов Python, установленных в этой среде:
```
$ pipenv run pip list
```
### Управление зависимостями с помощью Pipfile.lock 
Каждый раз, когда пакет устанавливается в среде pipenv, pipfile.lock автоматически обновляется. 

Однако в зависимости от обстоятельств pipfile.lock может не обновляться во время установки пакета:

Pipfile.lock может не обновиться во время установки пакета. Например, при клонировании репозитория, созданного на другом компьютере с другой ОС, pipfile.lock может не обновляться. Несовместимость pipfile.lock может возникнуть из-за того, что pipfile.lock зависит от системы.

Большие файлы pipfile.lock обновляются очень медленно, и может оказаться целесообразным отложить обновление. Параметр команды pipenv install –skip-lock можно использовать для пропуска pipfile.lock.
 Если по какой-либо причине файл pipfile.lock не обновлен, можно запустить команду создания нового файла pipfile.lock:  
```
$ pipenv install <packagename> 
```
pipfile.lock будет обновлен.
```
$ pipenv install –skip-lock <имя_пакета> 
```
pipfile.lock не будет обновляться.
```
$ pipfile lock 
```
будет сгенерирован pipfile.lock.
## Управление зависимостями с помощью Venv
Venv является преемником VirtualEnv и функционирует аналогичным образом с двумя важными отличиями: 
Venv включен в Python 3.3+ и не требует установки.
Venv - это инструмент более низкого уровня, чем Pipenv, и он особенно полезен, если Pipenv не соответствует специфическим потребностям в виртуальной среде. 
Если вы работаете с Python 3.8, вы можете создать виртуальную среду Venv, выполнив следующие действия:
перейдите в каталог, в котором вы хотите создать свой проект,
откройте терминал или командное окно и введите:
```
$ python -m venv <имя_проекта_приложения>
```
Если вы работаете с Python 3.7, вы можете создать виртуальную среду Venv, выполнив следующие действия:
перейдите в каталог, в котором вы хотите создать проект,
откройте окно терминала или команды и введите:
```
$ python -m virtualenv venv <имя_проекта_приложения>
```
В результате создана папка с деревом каталогов и файлом pyvenv.cfg с таким содержимым:
```
home = /Users/g7/anaconda3/bin
include-system-site-packages = true
version = 3.6.5
```
## Управление зависимостями с помощью Pyenv
Pyenv - это менеджер версий Python, который позволяет выполнять множество задач, включая:

Изменение глобальной версии Python.

Установка нескольких версий Python

Выбор версий Python для конкретных каталогов или проектов.

Создание виртуальных сред и управление ими. 

ПРИМЕЧАНИЕ: Pyenv является расширением Bash и не будет работать в Windows вне подсистемы для Linux.
### Установка Pyenv в Linux
Существует два основных способа установки Pyenv:

Установщик Pyenv.

Клонируйте Pyenv из Github, а затем настройте его вручную.

Как установить Pyenv 

Чтобы установить Pyenv в Linux с помощью установщика, сначала убедитесь, что система имеет Git, Curl и Bash.
Откройте терминал в Linux и введите:
```
$ curl https://pyenv.run | bash
```
или
```
curl -L https://raw.githubusercontent.com/yyuu/pyenv-installer/master/bin/pyenv-installer | bash
```
pyenv.run перенаправляет в скрипт установки по адресу https://github.com/pyenv/pyenv-installer

2. Перезапустите оболочку, чтобы изменения пути вступили в силу:
```
$ exec $SHELL 
```
Как клонировать Pyenv из Github

Pyenv можно  клонировать с https://github.com/pyenv/pyenv.git и установить с использованием Bash.
Запустите команду git clone из каталога, куда вы хотите установить Pyenv. Рекомендуется $HOME/.pyenv 
```
$ git clone https://github.com/pyenv/pyenv.git ~/.pyenv
```
2. Создайте переменную среды с именем PYENV_ROOT, указывающую путь по которому клонируется Pyenv, а затем добавьте $PYENV_ROOT/bin в $PATH для доступа к утилите командной строки Pyenv.

3. Используйте Bash для установки Pyenv (на большинстве версий Linux):
```
$ echo ‘export PYENV_ROOT=”$HOME/.pyenv”‘ >> ~/.bash_profile
       $ echo ‘export PATH=”$PYENV_ROOT/bin:$PATH”‘ >> ~/.bash_profile
```
Для Ubuntu desktops используйте следующие команды Bash:
```
$ echo ‘export PYENV_ROOT=”$HOME/.pyenv”‘ >> ~/.bashrc
       $ echo ‘export PATH=”$PYENV_ROOT/bin:$PATH”‘ >> ~/.bashrc 
```
4. Добавьте pyenv init в оболочку, чтобы включить. Вставьте eval “$(pyenv init -)” в конец файла конфигурации оболочки:
```
$ echo -e ‘if command -v pyenv 1>/dev/null 2>&1; then\n  eval “$(pyenv init -)”\nfi’ >> ~/.bash_profile
```
Примечание: для Ubuntu и Fedora Linux измените файл ~/.bashrc, а не ~/.bash_profile.

Внимание: в некоторых системах переменная BASH_ENV настроена для указания на .bashrc. Чтобы избежать непредсказуемого поведения в этих системах, вы должны написать  eval “$(pyenv init -)” в .bash_profile, а не в .bashrc. 

5. Перезапустите оболочку, чтобы изменения пути вступили в силу:
```
$ exec “$SHELL”
```
### Использование Pyenv
Команды Pyenv позволят установить и управлять несколькими версиями Python в одной системе. 

Вывести список всех доступных для установки версий Python:
```
$ pyenv install –list 
```
Чтобы установить питон 3.8.1, введите:
```
$ pyenv install 3.8.1
```
Определить, какую версию Python вы используете:
```
$ pyenv version
```
Просмотреть все версии Python, установленные в системе и доступные для использования:
```
$ pyenv versions
```
Чтобы установить глобальную версию Python для использования во всех оболочках, введите: 
```
$ python global <version#>
```
Чтобы установить локальную версию Python, которая будет использоваться для конкретного проекта, переопределяя глобальную версию, введите:
```
$ python local <version#>
```
Установить версию Python, которая будет использоваться в конкретном экземпляре оболочки: 
```
$ pyenv shell <version#>
```
ДЛЯ ПЕРЕКЛЮЧЕНИЯ НА PYTHON:
```
$ pyenv local 3.8.1
```
